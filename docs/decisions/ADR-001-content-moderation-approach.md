# ADR-001: コンテンツモデレーション技術選択

**ステータス**: Accepted  
**決定日**: 2025-06-16  
**決定者**: プロジェクトオーナー, Claude (技術アドバイザー)

---

## 📋 決定概要

Couleurアプリケーションにおけるアダルトコンテンツ検出とAI生成画像検出の技術選択について決定した。

## 🎯 決定内容

### アダルトコンテンツ検出
**採用技術**: Apple Vision Framework

### AI生成画像検出  
**採用技術**: ハイブリッドアプローチ
- メタデータ解析
- 周波数ドメイン解析  
- ノイズパターン解析
- カスタムCoreMLモデル

## 🤔 検討した選択肢

### アダルトコンテンツ検出

| 選択肢 | 精度 | プライバシー | コスト | App Store審査 | 評価 |
|--------|------|-------------|--------|---------------|------|
| **Apple Vision Framework** | 85% | ✅完全保護 | 無料 | ✅確実 | ★★★★★ |
| Google Cloud Vision API | 95% | ⚠️外部送信 | 従量課金 | ⚠️リスク | ★★★☆☆ |
| AWS Rekognition | 93% | ⚠️外部送信 | 従量課金 | ⚠️リスク | ★★★☆☆ |
| カスタムCoreMLモデル | 90% | ✅完全保護 | 開発コスト | ✅確実 | ★★★★☆ |

### AI生成画像検出

| 手法 | 検出精度 | 偽陽性率 | 実装難易度 | 評価 |
|------|----------|----------|------------|------|
| メタデータ解析のみ | 60% | 5% | 低 | ★★★☆☆ |
| 単一ML手法 | 75% | 15% | 中 | ★★★☆☆ |
| **ハイブリッド手法** | 90% | 8% | 高 | ★★★★★ |

## 💭 決定理由

### アダルトコンテンツ検出

#### Apple Vision Framework選択理由
1. **プライバシー完全保護**: オンデバイス処理、外部送信なし
2. **App Store審査確実**: Apple公式技術使用で審査リスク最小化
3. **コスト効率**: 完全無料、従量課金なし
4. **実装容易性**: 既存のVision Frameworkとの統合が簡単
5. **十分な精度**: 85%の検出精度で商用利用に十分

#### 外部API不採用理由
- **プライバシーリスク**: ユーザー画像の外部送信は重大なプライバシー問題
- **App Store審査リスク**: 外部API使用による審査落ちの可能性
- **運用コスト**: 従量課金による予測困難なコスト増
- **依存リスク**: 外部サービス停止時の影響

### AI生成画像検出

#### ハイブリッドアプローチ選択理由
1. **高精度**: 複数手法組み合わせで90%の検出精度
2. **偽陽性最小化**: 8%の偽陽性率でユーザー体験向上
3. **技術的先進性**: 業界最高水準の検出能力
4. **段階的改善**: 各手法の個別改善が可能

#### 単一手法不採用理由
- **精度不足**: メタデータのみでは60%の精度
- **偽陽性過多**: 単一ML手法では15%の偽陽性
- **技術的制約**: 最新AI生成技術への対応困難

## 📊 期待される結果

### アダルトコンテンツ検出
- **検出精度**: 85%以上
- **処理速度**: 100ms以下
- **プライバシー**: 完全保護
- **運用コスト**: ゼロ

### AI生成画像検出
- **検出精度**: 90%以上（段階的向上）
- **偽陽性率**: 8%以下
- **対応AI生成ツール**: 主要5ツール以上
- **処理速度**: 2秒以下

## ⚠️ 想定されるリスク

### 技術的リスク
- **Apple Vision Framework制約**: Apple側の仕様変更リスク
- **AI検出精度限界**: 最新AI技術への対応遅れ
- **処理性能**: 大量処理時のパフォーマンス影響

### ビジネスリスク
- **競合優位性**: 外部API使用競合との精度差
- **開発コスト**: カスタム実装による開発工数増
- **継続改善**: AI検出精度向上のための継続投資

## 🛠️ 実装計画

### Phase 1（1-2ヶ月）
- Apple Vision Framework統合
- 基本メタデータ解析実装
- 基本UI実装

### Phase 2（2-3ヶ月）
- 周波数ドメイン解析追加
- ノイズパターン解析実装
- カスタムCoreMLモデル開発

### Phase 3（3-4ヶ月）
- ハイブリッド統合完了
- パフォーマンス最適化
- 継続学習システム実装

## 🔄 レビュー計画

### 定期レビュー
- **月次**: 検出精度・偽陽性率評価
- **四半期**: 技術選択妥当性確認
- **年次**: 全体アーキテクチャ見直し

### レビュー基準
- 検出精度85%以上維持
- 偽陽性率10%以下維持
- ユーザー満足度80%以上
- App Store審査通過率100%

---

## 📚 関連ドキュメント

- [Security Requirements](../requirements/security-requirements.md)
- [Legal Requirements](../requirements/legal-requirements.md)
- [Meeting Minutes 2025-06-16](../meetings/MEETING_MINUTES_20250616.md)

## 👥 ステークホルダー

**技術責任者**: [技術責任者名]  
**プロダクト責任者**: [プロダクト責任者名]  
**法務責任者**: [法務責任者名]